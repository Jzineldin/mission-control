# Contributing to Mission Control

Thanks for your interest in contributing! This guide will help you get started.

## Development Setup

### Prerequisites
- Node.js 18+
- An OpenClaw installation with gateway enabled
- npm or yarn

### Quick Start

```bash
# Clone the repo
git clone https://github.com/Jzineldin/mission-control.git
cd mission-control

# Install backend dependencies
npm install

# Install frontend dependencies
cd frontend && npm install && cd ..

# Start in dev mode (frontend + backend)
# Terminal 1: Backend
node server.js

# Terminal 2: Frontend dev server (hot reload)
cd frontend && npm run dev
```

Frontend dev server runs on `http://localhost:5173` with hot module replacement.
Backend runs on `http://localhost:3333`.

### Build for Production

```bash
cd frontend
NODE_OPTIONS="--max-old-space-size=512" npm run build
cd ..
node server.js
```

> Note: The build requires ~512MB memory. Set `NODE_OPTIONS` if you're on a constrained system.

## Project Structure

```
mission-control/
├── server.js              # Express backend (API + static serving)
├── mc-config.json         # User configuration (generated by setup wizard)
├── mc-config.default.json # Default configuration template
├── scout-engine.js        # Scout search engine (runs as child process)
├── package.json
├── frontend/
│   ├── src/
│   │   ├── App.tsx        # Main app with routing
│   │   ├── pages/         # All page components
│   │   ├── components/    # Reusable components
│   │   ├── lib/           # Hooks, utilities
│   │   └── index.css      # Global styles
│   └── dist/              # Production build output
├── CHANGELOG.md
├── SKILL.md               # OpenClaw skill definition
├── install.sh             # Interactive installer
└── README.md
```

## Architecture

### Backend (`server.js`)
- Express.js serving static files + API endpoints
- Proxies requests to OpenClaw gateway (default port 18789)
- Manages local state (tasks, scout results, config)
- No database — uses JSON files for persistence

### Frontend (`frontend/`)
- React 18 + TypeScript + Vite
- Framer Motion for animations
- Inline styles (intentional — avoids Tailwind v4 spacing issues)
- Code-split with React.lazy for all route pages
- Custom hooks (`useApi`, `useIsMobile`) for data fetching

### Key Design Decisions
- **Inline styles over CSS modules** — Prevents class name conflicts and works with code splitting
- **Polling over WebSockets** — Simpler, works through reverse proxies, sufficient for dashboard use
- **JSON files over database** — Zero-dependency setup, easy backup, human-readable
- **Dynamic model detection** — Reads from OpenClaw config, supports any provider

## Pull Request Guidelines

1. **Fork** the repository
2. Create a **feature branch** (`feature/my-improvement`)
3. Make your changes
4. **Build** and test: `cd frontend && npm run build`
5. **Commit** with a descriptive message
6. **Submit** a pull request

### Code Style
- TypeScript for all frontend code
- Descriptive variable names over comments
- Keep components under 300 lines (extract sub-components)
- Use the existing hook patterns (`useApi`, `useIsMobile`)

### Commit Messages
```
type: Brief description

Longer explanation if needed.
```

Types: `feat`, `fix`, `refactor`, `docs`, `style`, `perf`, `test`

## Adding a New Page

1. Create `frontend/src/pages/YourPage.tsx`
2. Add lazy import in `App.tsx`
3. Add route in the `<Routes>` section
4. Add sidebar entry in `Sidebar.tsx`
5. Add module toggle in `mc-config.default.json`

## Adding an API Endpoint

1. Add the endpoint in `server.js`
2. Use the existing patterns for error handling and caching
3. Document in SKILL.md under "API Endpoints"

## Reporting Issues

- **Bug reports**: Include browser, Node.js version, OpenClaw version
- **Feature requests**: Describe the use case, not just the solution
- **Screenshots**: Always helpful for UI issues

## License

By contributing, you agree that your contributions will be licensed under the BSL 1.1 license.
